<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <style>
            .menu-title{border-bottom:solid 1px; width:75px;}
            .left-area{float:left; box-sizing: border-box;}
            .right-area{float:right; box-sizing: border-box;}
            .number-field{text-align:right}
            .date-field{text-align:center;}
            .hyper-field{color: blue; text-decoration: underline; cursor:pointer;}
            .input-box-area{border: solid 1px; width:230px;}
            .label-field{text-align:right;}
            .label-area{width:70px;}
            .list-area{width:75vw;}
            .input-area{width:calc(230px - 80px);}
            div.input-area>div>input{width:125px;}
            .total-field{border: none; text-align: right;}
            .save-button{width:100%;}
        </style>
        <script>
            const makeRequest = () => {
                httpRequest = new XMLHttpRequest();

                if(!httpRequest){
                    console.error(`Can't make XMLHTTP instance.`);
                    return false;
                }

                httpRequest.onreadystatechange = alertContents;
                httpRequest.open('GET', '/order');
                httpRequest.send();
            }

            const alertContents = () => {
                try {
                    if (httpRequest.readyState === XMLHttpRequest.DONE) {
                        if (httpRequest.status === 200) {
                            const resultList = JSON.parse(httpRequest.responseText);
                            const order = document.querySelector('.order_row');

                            const orderField = document.querySelector('.order-field');
                            const dateField     = document.querySelector('.date-field');
                            const carField      = document.querySelector('.car-field');
                            const itemField     = document.querySelector('.item-field');
                            const quantityField = document.querySelector('.quantity-field');
                            const priceField    = document.querySelector('.price-field');
                            const overpayField  = document.querySelector('.overpay-field');
                            const sumField      = document.querySelector('.sum-field');

                            orderField.innerText = resultList[0].order_seq;
                            dateField.innerText = resultList[0].order_date;
                            carField.innerText = resultList[0].bike_number;
                            itemField.innerText = resultList[0].item_name;
                            quantityField.innerText = resultList[0].count;
                            priceField.innerText = resultList[0].item_price;
                            overpayField.innerText = resultList[0].labor;
                            sumField.innerText = resultList[0].total_price;
                            
                        } else {
                            console.error('request에 뭔가 문제가 있어요.');
                        }
                    }
                } catch (error) {
                    console.error(`Caught Exception : ${error.message}`);
                }
            }


            window.onload = () =>{
                makeRequest();
            }

        </script>
    </head>
    <body>
        <div class="menu-title">전표등록</div>
        <div>
            <div class="left-area input-box-area">
                <div class="left-area label-area">
                    <div class="label-field">입력일자</div>
                    <div class="label-field">거래처</div>
                    <div class="label-field">차대번호</div>
                    <div class="label-field">품목</div>
                    <div class="label-field">수량</div>
                    <div class="label-field">금액</div>
                    <div class="label-field">추가공임</div>
                    <div class="label-field">합계</div>
                </div>
                <div class="right-area input-area">
                    <div><input type="date"></div>
                    <div><input type="text"></div>
                    <div><input type="number" min="0"></div>
                    <div><input type="text"></div>
                    <div><input type="number" min="0"></div>
                    <div><input type="number" min="0"></div>
                    <div><input type="number" min="0"></div>
                    <div><input class="total-field" type="number" min="0" readonly="true" value="0"></div>
                </div>
                <div><input class="save-button" type="button" value="입력하기"></div>
            </div>
            <div class="right-area list-area">
                <table>
                    <tr>
                        <th>순번</th>
                        <th>주문일자</th>
                        <th>차대번호</th>
                        <th>품목</th>
                        <th>수량</th>
                        <th>금액</th>
                        <th>추가공임</th>
                        <th>합계</th>
                    </tr>
                    <tr id="order_row">
                        <td class="order-field number-field"></td>
                        <td class="date-field"></td>
                        <td class="car-field number-field"></td>
                        <td class="item-field hyper-field"></td>
                        <td class="quantity-field number-field"></td>
                        <td class="price-field number-field"></td>
                        <td class="overpay-field number-field"></td>
                        <td class="sum-field"></td>
                    </tr>
                </table>
            </div>
        </div>
    </body>
</html>